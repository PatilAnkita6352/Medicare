webpackJsonp([4],{290:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e){return{upcomingAppointmentsList:e.appointmentReducer.upcomingAppointmentsList,pastAppointmentsList:e.appointmentReducer.pastAppointmentsList}}Object.defineProperty(t,"__esModule",{value:!0});var s=n(4),c=n.n(s),r=n(46),d=n(94),p=n.n(d),m=n(68),u=n.n(m),v=n(35),g=n(16),h=n.n(g),f=n(716),b=n(34),D=n(53),E=n(734),y=n(729),A=n(764),C=n(792),_=n(121),N=n(801),k=(n.n(N),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),M=function(e){function t(e){a(this,t);var n=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={appointmentDetails:{},isLoading:!1,isCancelDialogModalOpen:!1,isDeleteDialogModalOpen:!1,isContactModalOpen:!1,isDirectionsModalOpen:!1,isCabModalOpen:!1,retryAttempts:0},n.getAppointmentDetailsFromStore=n.getAppointmentDetailsFromStore.bind(n),n.getAppointmentDetails=n.getAppointmentDetails.bind(n),n.getCancelDialogModal=n.getCancelDialogModal.bind(n),n.getContactDialogModal=n.getContactDialogModal.bind(n),n.getDirectionsModal=n.getDirectionsModal.bind(n),n.getCabModal=n.getCabModal.bind(n),n.getDeleteDialogModal=n.getDeleteDialogModal.bind(n),n.getDoctorActionButtonsForPastAppointments=n.getDoctorActionButtonsForPastAppointments.bind(n),n.getDoctorActionButtonsForUpcomingAppointments=n.getDoctorActionButtonsForUpcomingAppointments.bind(n),n.getRescheduleButton=n.getRescheduleButton.bind(n),n.getRebookButton=n.getRebookButton.bind(n),n.showCall=n.showCall.bind(n),n.showDirections=n.showDirections.bind(n),n.showCabs=n.showCabs.bind(n),n.addToCalendar=n.addToCalendar.bind(n),n.deleteAppointment=n.deleteAppointment.bind(n),n.cancelAppointment=n.cancelAppointment.bind(n),n.isLocationDetailsAvailable=n.isLocationDetailsAvailable.bind(n),n.isContactDetailsAvailable=n.isContactDetailsAvailable.bind(n),n.openFeedbackURL=n.openFeedbackURL.bind(n),n.closeModal=n.closeModal.bind(n),n.renderNotificationBar=n.renderNotificationBar.bind(n),n.renderCallButton=n.renderCallButton.bind(n),n.renderFeedbackButton=n.renderFeedbackButton.bind(n),n.renderNavigateButton=n.renderNavigateButton.bind(n),n.renderCabButton=n.renderCabButton.bind(n),n.renderModal=n.renderModal.bind(n),n.renderDoctorActionButtons=n.renderDoctorActionButtons.bind(n),n.renderAppointmentActionButtons=n.renderAppointmentActionButtons.bind(n),n.rescheduleAppointmentResponseListener=n.rescheduleAppointmentResponseListener.bind(n),n.getUpdatedAppointmentDetails=n.getUpdatedAppointmentDetails.bind(n),n.addRescheduleResponseListener=n.addRescheduleResponseListener.bind(n),n.openRescheduleAndAddListener=n.openRescheduleAndAddListener.bind(n),n.openRebookUrlAndAddListener=n.openRebookUrlAndAddListener.bind(n),n.rebookAppointmentResponseListener=n.rebookAppointmentResponseListener.bind(n),n.getChosenClinicIndex=n.getChosenClinicIndex.bind(n),n}return i(t,e),k(t,[{key:"componentWillMount",value:function(){var e=this;e.theStore=e.context.store,_.a.appointmentDetailsView(),!1===e.getAppointmentDetailsFromStore()&&e.setState({isLoading:!0})}},{key:"componentDidMount",value:function(){var e=this;"true"===e.props.location.query.updated?e.getUpdatedAppointmentDetails():e.getAppointmentDetails(e.props.params.objectIdentifier)}},{key:"componentWillReceiveProps",value:function(e){for(var t=this,n=!1,a=0;a<e.upcomingAppointmentsList.length;a++)if(e.upcomingAppointmentsList[a].object_identifier.toString()===t.props.params.objectIdentifier){t.setState({appointmentDetails:e.upcomingAppointmentsList[a]}),n=!0;break}if(!1===n)for(var o=0;o<e.pastAppointmentsList.length;o++)if(e.pastAppointmentsList[o].object_identifier.toString()===t.props.params.objectIdentifier){n=!0,t.setState({appointmentDetails:e.pastAppointmentsList[o]});break}!1===n&&v.browserHistory.push("/appointments")}},{key:"getAppointmentDetailsFromStore",value:function(){for(var e=this,t=!1,n=0;n<e.props.upcomingAppointmentsList.length;n++)if(e.props.upcomingAppointmentsList[n].object_identifier.toString()===e.props.params.objectIdentifier){e.setState({appointmentDetails:e.props.upcomingAppointmentsList[n]}),t=!0;break}if(!1===t)for(var a=0;a<e.props.pastAppointmentsList.length;a++)if(e.props.pastAppointmentsList[a].object_identifier.toString()===e.props.params.objectIdentifier){e.setState({appointmentDetails:e.props.pastAppointmentsList[a]}),t=!0;break}return t}},{key:"getGoogleMapsDirectionURL",value:function(e,t){return"https://maps.google.com/maps?f=d&daddr="+e+","+t+"&hl=en"}},{key:"getOlaDeepLink",value:function(e,t,n){return"olacabs://app/launch?drop_lat="+t+"&drop_lng="+n+"&category=micro&utm_source="+window.__clientConfig.olaAccessToken+"&landing_page=bk"}},{key:"getAppointmentDetails",value:function(e){var t=this;t.setState({isLoading:!0}),b.a.getAppointmentDetails(e).end(function(e,a){null===e?void 0===t.state.appointmentDetails.object_identifier?t.theStore.dispatch(n.i(f.c)(a.body.data)):t.isUpcoming(a.body.data.appointment_date,a.body.data.appointment_status)?t.theStore.dispatch(n.i(f.a)(a.body.data)):t.theStore.dispatch(n.i(f.b)(a.body.data)):404===e.status&&(t.theStore.dispatch(n.i(f.f)(t.props.params.objectIdentifier)),v.browserHistory.push("/appointments")),t.setState({isLoading:!1})})}},{key:"getUpdatedAppointmentDetails",value:function(){var e=this;if(void 0===e.state.appointmentDetails.appointment_id)return void e.getAppointmentDetails(e.props.params.objectIdentifier);e.setState({isLoading:!0}),b.a.getAppointmentDetails(e.props.params.objectIdentifier).end(function(t,a){null===t?a.body.data.appointment_date===e.state.appointmentDetails.appointment_date?e.state.retryAttempts<=3?(setTimeout(e.getUpdatedAppointmentDetails,5e3),e.setState({retryAttempts:e.state.retryAttempts+1})):e.setState({isLoading:!1}):(e.theStore.dispatch(n.i(f.a)(a.body.data)),e.setState({isLoading:!1})):404===t.status&&(e.theStore.dispatch(n.i(f.f)(e.props.params.objectIdentifier)),e.setState({isLoading:!1}))})}},{key:"getCancelDialogModal",value:function(){var e=this,t={doctorName:e.state.appointmentDetails.doctor_name,date:e.state.appointmentDetails.appointment_date,doctorSpeciality:e.state.appointmentDetails.doctor_speciality};return c.a.createElement(u.a,{className:"cancel-dialog-modal",isOpen:e.state.isCancelDialogModalOpen,overlayClassName:"modal-overlay",onRequestClose:e.closeModal},c.a.createElement(y.a,{actionDetails:t,objectIdentifier:e.state.appointmentDetails.object_identifier,closeModal:e.closeModal}))}},{key:"getContactDialogModal",value:function(){var e=this,t=[],n=window.innerWidth>0?window.innerWidth:screen.width,a=this.getChosenClinicIndex("contact_number");if(isNaN(a))e.state.appointmentDetails.doctor_clinics.forEach(function(e){if(void 0!==e.contact_number&&e.contact_number.length>0&&(e.street_address.length>0||e.locality.length>0)){var a={actionURL:n<768?"tel:"+e.contact_number:null,heading:e.street_address||e.locality,details:"("+e.contact_number+")"};t.push(a)}});else{var o=e.state.appointmentDetails.doctor_clinics[a],i={actionURL:n<768?"tel:"+o.contact_number:null,heading:o.name,details:"("+o.contact_number+")"};t.push(i)}return t.length>0?c.a.createElement(u.a,{className:"item-list-modal",isOpen:e.state.isContactModalOpen,overlayClassName:"modal-overlay",onRequestClose:e.closeModal},c.a.createElement(E.a,{title:"Call clinic",listData:t,closeModal:e.closeModal})):null}},{key:"getDirectionsModal",value:function(){var e=this,t=[];return e.state.appointmentDetails.doctor_clinics.forEach(function(n){if(void 0!==n.latitude&&n.latitude.length>0&&(n.street_address.length>0||n.locality.length>0)){var a={actionURL:e.getGoogleMapsDirectionURL(n.latitude,n.longitude),heading:n.street_address||n.locality};t.push(a)}}),t.length>0?c.a.createElement(u.a,{className:"item-list-modal",isOpen:e.state.isDirectionsModalOpen,overlayClassName:"modal-overlay",onRequestClose:e.closeModal},c.a.createElement(E.a,{title:"Get directions to clinic",listData:t,closeModal:e.closeModal})):null}},{key:"getCabModal",value:function(){var e=this,t=[];return e.state.appointmentDetails.doctor_clinics.forEach(function(n){if(void 0!==n.latitude&&n.latitude.length>0&&(n.street_address.length>0||n.locality.length>0)){var a={actionURL:e.getOlaDeepLink(n.street_address||n.locality,n.latitude,n.longitude),heading:n.street_address||n.locality};t.push(a)}}),t.length>0?c.a.createElement(u.a,{className:"item-list-modal",isOpen:e.state.isCabModalOpen,overlayClassName:"modal-overlay",onRequestClose:e.closeModal},c.a.createElement(E.a,{title:"Get an Ola",listData:t,closeModal:e.closeModal})):null}},{key:"getDeleteDialogModal",value:function(){var e=this,t={doctorName:e.state.appointmentDetails.doctor_name,date:e.state.appointmentDetails.appointment_date,doctorSpeciality:e.state.appointmentDetails.doctor_speciality};return c.a.createElement(u.a,{className:"delete-dialog-modal",isOpen:e.state.isDeleteDialogModalOpen,overlayClassName:"modal-overlay",onRequestClose:e.closeModal},c.a.createElement(A.a,{actionDetails:t,objectIdentifier:e.state.appointmentDetails.object_identifier,closeModal:e.closeModal}))}},{key:"getDoctorActionButtonsForPastAppointments",value:function(){var e=this;return e.isContactDetailsAvailable()||e.state.appointmentDetails.feedback_url.length>0?c.a.createElement("div",{className:"doctor-actions row"},e.renderCallButton(),e.renderFeedbackButton()):null}},{key:"getDoctorActionButtonsForUpcomingAppointments",value:function(){var e=this;return e.isLocationDetailsAvailable()||e.isContactDetailsAvailable()?c.a.createElement("div",{className:"doctor-actions"},e.renderCallButton(),e.renderNavigateButton(),e.renderCabButton()):null}},{key:"getRescheduleButton",value:function(){var e=this,t=null;return e.state.appointmentDetails.reschedule_url.length>0?t=c.a.createElement("div",{onClick:e.openRescheduleAndAddListener},"Reschedule Appointment",c.a.createElement("span",{className:"genesis-font-icon icon-ic_next_cheveron"})):e.isContactDetailsAvailable()&&(t=c.a.createElement("div",{onClick:e.showCall},"Call to Reschedule",c.a.createElement("span",{className:"genesis-font-icon icon-ic_next_cheveron"}))),t}},{key:"getRebookButton",value:function(){var e=this;return e.state.appointmentDetails.book_again_url.length>0?c.a.createElement("div",{onClick:e.openRebookUrlAndAddListener},"Rebook Appointment",c.a.createElement("span",{className:"genesis-font-icon icon-ic_next_cheveron"})):e.isContactDetailsAvailable()?c.a.createElement("div",{onClick:e.showCall},"Call To Rebook Appointment",c.a.createElement("span",{className:"genesis-font-icon icon-ic_next_cheveron"})):null}},{key:"getChosenClinicIndex",value:function(e){var t=this,n=void 0,a=0;if(1===t.state.appointmentDetails.doctor_clinics.length)n=0;else{for(var o=0;o<t.state.appointmentDetails.doctor_clinics.length;o++)void 0!==t.state.appointmentDetails.doctor_clinics[o][e]&&t.state.appointmentDetails.doctor_clinics[o][e].length>0&&t.state.appointmentDetails.doctor_clinics[o].name===t.state.appointmentDetails.clinic_name&&(n=o,a++);a>1&&(n=void 0)}return n}},{key:"openRebookUrlAndAddListener",value:function(){var e=this;_.a.appointmentDetailsRebookClick();var t=document.createElement("a");t.href=e.state.appointmentDetails.book_again_url,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t),window.addEventListener("storage",e.rebookAppointmentResponseListener)}},{key:"rebookAppointmentResponseListener",value:function(){null!==localStorage.getItem("appointment-confirmation-success")&&(localStorage.removeItem("appointment-confirmation-success"),window.location.reload())}},{key:"openRescheduleAndAddListener",value:function(){var e=this;if(_.a.appointmentDetailsRescheduleClick(),e.state.appointmentDetails.reschedule_url.length>0){var t=document.createElement("a");t.href=e.state.appointmentDetails.reschedule_url,t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t),e.addRescheduleResponseListener()}}},{key:"addRescheduleResponseListener",value:function(){var e=this;window.addEventListener("storage",e.rescheduleAppointmentResponseListener)}},{key:"rescheduleAppointmentResponseListener",value:function(){var e=this;null!==localStorage.getItem("appointment-reschedule-success")&&(localStorage.removeItem("appointment-reschedule-success"),window.removeEventListener("storage",e.rescheduleAppointmentResponseListener),e.getUpdatedAppointmentDetails())}},{key:"goToAppointmentsTimeline",value:function(){v.browserHistory.push("/appointments")}},{key:"showCall",value:function(){var e=this;_.a.appointmentDetailsCallClick();var t=this.getChosenClinicIndex("contact_number"),n=window.innerWidth>0?window.innerWidth:screen.width;if(!isNaN(t)&&n<768){var a=document.createElement("a");a.href=encodeURI("tel:"+e.state.appointmentDetails.doctor_clinics[t].contact_number),a.target="_blank",document.body.appendChild(a),a.click(),document.body.removeChild(a)}else e.setState({isContactModalOpen:!0})}},{key:"showDirections",value:function(){var e=this;_.a.appointmentDetailsMapsClick();var t=this.getChosenClinicIndex("latitude");if(isNaN(t))e.setState({isDirectionsModalOpen:!0});else{var n=document.createElement("a");n.href=encodeURI(e.getGoogleMapsDirectionURL(e.state.appointmentDetails.doctor_clinics[t].latitude,e.state.appointmentDetails.doctor_clinics[t].longitude)),n.target="_blank",n.rel="noreferrer noopener",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}},{key:"showCabs",value:function(){var e=this;_.a.appointmentDetailsOlaClick();var t=this.getChosenClinicIndex("latitude");if(isNaN(t))e.setState({isCabModalOpen:!0});else{var n=document.createElement("a");n.href=encodeURI(e.getOlaDeepLink(e.state.appointmentDetails.doctor_clinics[t].street_address,e.state.appointmentDetails.doctor_clinics[t].latitude,e.state.appointmentDetails.doctor_clinics[t].longitude)),n.target="_blank",n.rel="noreferrer noopener",document.body.appendChild(n),n.click(),document.body.removeChild(n)}}},{key:"addToCalendar",value:function(){var e=this;_.a.appointmentDetailsAddToCalendarClick();var t="Appointment";e.state.appointmentDetails.doctor_name.length>0?t+=" with "+e.state.appointmentDetails.doctor_name:e.state.appointmentDetails.clinic_name.length>0&&(t+=" at "+e.state.appointmentDetails.clinic_name),n.i(C.a)(t,e.state.appointmentDetails.street_address,e.state.appointmentDetails.appointment_date)}},{key:"deleteAppointment",value:function(){var e=this;e.closeModal(),_.a.appointmentDetailsDeleteClick(),e.setState({isDeleteDialogModalOpen:!0})}},{key:"cancelAppointment",value:function(){var e=this;e.closeModal(),_.a.appointmentDetailsCancelClick(),e.setState({isCancelDialogModalOpen:!0})}},{key:"isLocationDetailsAvailable",value:function(){for(var e=this,t=0;t<e.state.appointmentDetails.doctor_clinics.length;t++)if(null!==e.state.appointmentDetails.doctor_clinics[t].latitude&&null!==e.state.appointmentDetails.doctor_clinics[t].longitude&&e.state.appointmentDetails.doctor_clinics[t].street_address.length>0)return!0;return!1}},{key:"isContactDetailsAvailable",value:function(){for(var e=this,t=0;t<e.state.appointmentDetails.doctor_clinics.length;t++)if(e.state.appointmentDetails.doctor_clinics[t].contact_number.length>0&&e.state.appointmentDetails.doctor_clinics[t].street_address.length>0)return!0;return!1}},{key:"openFeedbackURL",value:function(){var e=this;if(_.a.appointmentDetailsFeedbackClick(),e.state.appointmentDetails.feedback_url.length>0){var t=document.createElement("a");t.href=encodeURI(e.state.appointmentDetails.feedback_url),t.target="_blank",document.body.appendChild(t),t.click(),document.body.removeChild(t)}}},{key:"closeModal",value:function(){this.setState({isCancelDialogModalOpen:!1,isDeleteDialogModalOpen:!1,isContactModalOpen:!1,isDirectionsModalOpen:!1,isCabModalOpen:!1})}},{key:"isUpcoming",value:function(e,t){if("CANCELLED"===t)return!1;var n=p.a.utc().local();return p.a.utc(e).local()>n}},{key:"renderNotificationBar",value:function(){return"CANCELLED"===this.state.appointmentDetails.appointment_status?c.a.createElement("div",{className:"notification-bar cancelled"},"Appointment has been cancelled"):null}},{key:"renderCallButton",value:function(){var e=this;return e.isContactDetailsAvailable()?c.a.createElement("div",{className:"text-center",onClick:e.showCall},c.a.createElement("div",{className:"genesis-font-icon icon-ic_call"}),c.a.createElement("div",null,"Call Clinic")):null}},{key:"renderFeedbackButton",value:function(){var e=this;return e.state.appointmentDetails.feedback_url.length>0?c.a.createElement("div",{className:"text-center",onClick:e.openFeedbackURL},c.a.createElement("div",{className:"genesis-font-icon icon-ic_message"}),c.a.createElement("div",null,"Give Feedback")):null}},{key:"renderNavigateButton",value:function(){var e=this;return e.isLocationDetailsAvailable()?c.a.createElement("div",{className:"text-center",onClick:e.showDirections},c.a.createElement("div",{className:"genesis-font-icon icon-ic_distance"}),c.a.createElement("div",null,"Get Directions")):null}},{key:"renderCabButton",value:function(){var e=this;return e.isLocationDetailsAvailable()?c.a.createElement("div",{className:"hidden-sm hidden-md hidden-lg text-center",onClick:e.showCabs},c.a.createElement("div",{className:"genesis-font-icon icon-cab"},c.a.createElement("img",{src:"/images/ic_cab.svg",role:"presentation"})),c.a.createElement("div",null,"Get an Ola")):null}},{key:"renderModal",value:function(){var e=this;return!0===e.state.isCancelDialogModalOpen?e.getCancelDialogModal():!0===e.state.isContactModalOpen?e.getContactDialogModal():!0===e.state.isDirectionsModalOpen?e.getDirectionsModal():!0===e.state.isCabModalOpen?e.getCabModal():!0===e.state.isDeleteDialogModalOpen?e.getDeleteDialogModal():null}},{key:"renderDoctorActionButtons",value:function(){var e=this;return"CANCELLED"===e.state.appointmentDetails.appointment_status?null:e.isUpcoming(e.state.appointmentDetails.appointment_date,e.state.appointmentDetails.appointment_status)?e.getDoctorActionButtonsForUpcomingAppointments():e.getDoctorActionButtonsForPastAppointments()}},{key:"renderAppointmentActionButtons",value:function(){var e=this;return e.isUpcoming(e.state.appointmentDetails.appointment_date,e.state.appointmentDetails.appointment_status)?c.a.createElement("div",{className:"appointment-actions"},e.getRescheduleButton(),c.a.createElement("div",{onClick:e.addToCalendar},"Add to Calendar",c.a.createElement("span",{className:"genesis-font-icon icon-ic_next_cheveron"})),c.a.createElement("div",{onClick:e.cancelAppointment},"Cancel Appointment",c.a.createElement("span",{className:"genesis-font-icon icon-ic_next_cheveron"}))):c.a.createElement("div",{className:"appointment-actions"},e.getRebookButton(),c.a.createElement("div",{onClick:e.deleteAppointment},"Delete Appointment",c.a.createElement("span",{className:"genesis-font-icon icon-ic_next_cheveron"})))}},{key:"render",value:function(){var e=this;return e.state.isLoading?c.a.createElement("div",{className:"appointment-details-container"},c.a.createElement("div",{className:"loader-wrapper"},c.a.createElement(D.a,{isLoading:!0}))):c.a.createElement("div",{className:"appointment-details-container"},e.renderNotificationBar(),e.renderModal(),c.a.createElement("div",{className:"date-time-container text-center bg-white text-small"},c.a.createElement("div",{className:"genesis-font-icon icon-ic_back hidden-xs",onClick:e.goToAppointmentsTimeline}),c.a.createElement("div",null,"DATE AND TIME"),c.a.createElement("div",{className:"date-time heading-four"},p.a.utc(e.state.appointmentDetails.appointment_date).local().format("dddd, DD MMMM, hh:mm A"))),c.a.createElement("div",{className:"doctor-card text-center bg-white text-small"},c.a.createElement("img",{src:e.state.appointmentDetails.doctor_photo_url,role:"presentation"}),c.a.createElement("div",{className:"doctor-speciality"},e.state.appointmentDetails.doctor_speciality.toUpperCase()),c.a.createElement("div",{className:"doctor-name heading-four"},e.state.appointmentDetails.doctor_name),c.a.createElement("div",null,"CLINIC"),c.a.createElement("div",{className:"clinic-name heading-four"},e.state.appointmentDetails.clinic_name),e.renderDoctorActionButtons()),e.renderAppointmentActionButtons(),c.a.createElement("div",{className:"appointment-details"},c.a.createElement("div",null,c.a.createElement("div",{className:"text-small"},"BOOKED FOR"),c.a.createElement("div",{className:"patient-name heading-four"},e.state.appointmentDetails.person_name)),c.a.createElement("div",null,c.a.createElement("div",{className:"text-small"},"APPOINTMENT ID"),c.a.createElement("div",{className:"appointment-id heading-four"},e.state.appointmentDetails.appointment_id))))}}]),t}(c.a.Component);M.contextTypes={store:h.a.object.isRequired},t.default=n.i(r.connect)(l)(M)},716:function(e,t,n){"use strict";function a(e){return{type:"ADD_APPOINTMENT",appointment:e}}function o(e){return{type:"UPDATE_UPCOMING_APPOINTMENT",appointment:e}}function i(e){return{type:"UPDATE_PAST_APPOINTMENT",appointment:e}}function l(e){return{type:"CANCEL_APPOINTMENT",objectIdentifier:e}}function s(e){return{type:"REMOVE_APPOINTMENT",objectIdentifier:e}}function c(e){return{type:"UPDATE_APPOINTMENTS_LAST_SYNC",lastSyncTime:e}}t.c=a,t.a=o,t.b=i,t.e=l,t.f=s,t.d=c},729:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(4),s=n.n(l),c=n(94),r=n.n(c),d=n(16),p=n.n(d),m=n(53),u=n(34),v=n(716),g=n(739),h=(n.n(g),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),f=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isLoading:!1,showError:!1,showSuccess:!1},e.cancelAppointment=e.cancelAppointment.bind(e),e}return i(t,e),h(t,[{key:"componentWillMount",value:function(){var e=this;e.theStore=e.context.store}},{key:"cancelAppointment",value:function(){var e=this;e.setState({isLoading:!0}),u.a.cancelAppointment(e.props.objectIdentifier).end(function(t){null===t?(e.setState({isLoading:!1,showSuccess:!0}),e.theStore.dispatch(n.i(v.e)(e.props.objectIdentifier)),e.props.closeModal()):e.setState({isLoading:!1,showError:!0})})}},{key:"render",value:function(){var e=this;return!0===e.state.isLoading?s.a.createElement("div",{className:"cancel-confimation-dialog loading"},s.a.createElement("div",{className:"loader-wrapper"},s.a.createElement(m.a,{isLoading:!0}))):!0===e.state.showSuccess?s.a.createElement("div",{className:"cancel-confimation-dialog error"},s.a.createElement("div",{className:"error-msg text-center"},"Appointment cancelled successfully."),s.a.createElement("div",{className:"close-btn text-center",onClick:e.props.closeModal},"Ok")):!0===e.state.showError?s.a.createElement("div",{className:"cancel-confimation-dialog error"},s.a.createElement("div",{className:"error-msg text-center"},"Looks like we are having some trouble cancelling your appointment. Please check your internet connection."),s.a.createElement("div",{className:"close-btn text-center",onClick:e.props.closeModal},"Ok")):s.a.createElement("div",{className:"cancel-confimation-dialog"},s.a.createElement("div",{className:"dialog-heading"},"Cancel Appointment"),s.a.createElement("div",{className:"dialog-body separator"},s.a.createElement("div",{className:"dialog-text"},"Are you sure you want to cancel this appointment with:"),s.a.createElement("div",{className:"dialog-doctor-details"},s.a.createElement("div",{className:"date-holder text-center bg-grey"},s.a.createElement("div",{className:"date heading-one"},r.a.utc(e.props.actionDetails.date).local().format("DD")),s.a.createElement("div",{className:"month heading-four"},r.a.utc(e.props.actionDetails.date).local().format("MMM").toUpperCase())),s.a.createElement("div",{className:"details-text"},s.a.createElement("div",{className:"doctor-name heading-four"},e.props.actionDetails.doctorName),s.a.createElement("div",{className:"doctor-speciality"},e.props.actionDetails.doctorSpeciality),s.a.createElement("div",{className:"day-time"},r.a.utc(e.props.actionDetails.date).local().format("dddd")+", ",r.a.utc(e.props.actionDetails.date).local().format("hh:mm a").toUpperCase())))),s.a.createElement("div",{className:"dialog-action-buttons text-right"},s.a.createElement("div",{className:"cancel-btn text-center",onClick:e.props.closeModal},"No"),s.a.createElement("div",{className:"confirm-btn text-center",onClick:e.cancelAppointment},"Yes")))}}]),t}(s.a.Component);f.contextTypes={store:p.a.object.isRequired},t.a=f},734:function(e,t,n){"use strict";function a(e){return void 0!==e&&e.length>0?i.a.createElement("div",{className:"item-details text-small"},e):null}var o=n(4),i=n.n(o),l=n(743),s=(n.n(l),function(e){return i.a.createElement("div",{className:"modal-list"},i.a.createElement("div",{className:"modal-list-heading"},e.title),i.a.createElement("div",{className:"modal-list-body separator"},e.listData.map(function(t){return i.a.createElement("div",{className:"modal-list-item"},t.actionURL?i.a.createElement("a",{href:t.actionURL,target:"_blank",rel:"noreferrer noopener",onClick:e.closeModal},i.a.createElement("div",{className:"item-heading"},t.heading),a(t.details)):i.a.createElement("div",null,i.a.createElement("div",{className:"item-heading"},t.heading),a(t.details)))})),i.a.createElement("div",{className:"modal-action-buttons"},i.a.createElement("div",{className:"modal-dismiss-btn",onClick:e.closeModal},"Done")))});t.a=s},739:function(e,t){},743:function(e,t){},764:function(e,t,n){"use strict";function a(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function o(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function i(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var l=n(4),s=n.n(l),c=n(94),r=n.n(c),d=n(16),p=n.n(d),m=n(53),u=n(34),v=n(716),g=n(814),h=(n.n(g),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}()),f=function(e){function t(){a(this,t);var e=o(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={isLoading:!1,showError:!1,showSuccess:!1},e.deleteAppointment=e.deleteAppointment.bind(e),e}return i(t,e),h(t,[{key:"componentWillMount",value:function(){var e=this;e.theStore=e.context.store}},{key:"deleteAppointment",value:function(){var e=this;e.setState({isLoading:!0}),u.a.deleteAppointment(e.props.objectIdentifier).end(function(t){null===t?(e.setState({isLoading:!1,showSuccess:!0}),e.theStore.dispatch(n.i(v.f)(e.props.objectIdentifier)),e.props.closeModal()):e.setState({isLoading:!1,showError:!0})})}},{key:"render",value:function(){var e=this;return!0===e.state.isLoading?s.a.createElement("div",{className:"delete-confimation-dialog loading"},s.a.createElement("div",{className:"loader-wrapper"},s.a.createElement(m.a,{isLoading:!0}))):!0===e.state.showSuccess?s.a.createElement("div",{className:"delete-confimation-dialog error"},s.a.createElement("div",{className:"error-msg text-center"},"Appointment deleted successfully."),s.a.createElement("div",{className:"close-btn text-center",onClick:e.props.closeModal},"Ok")):!0===e.state.showError?s.a.createElement("div",{className:"delete-confimation-dialog error"},s.a.createElement("div",{className:"error-msg text-center"},"Looks like we are having some trouble deleting your appointment. Please check your internet connection."),s.a.createElement("div",{className:"close-btn text-center",onClick:e.props.closeModal},"Ok")):s.a.createElement("div",{className:"delete-confimation-dialog"},s.a.createElement("div",{className:"dialog-heading"},"Delete Appointment"),s.a.createElement("div",{className:"dialog-body separator"},s.a.createElement("div",{className:"dialog-text"},"Are you sure you want to delete this appointment with:"),s.a.createElement("div",{className:"dialog-doctor-details"},s.a.createElement("div",{className:"date-holder text-center bg-grey"},s.a.createElement("div",{className:"date heading-one"},r.a.utc(e.props.actionDetails.date).local().format("DD")),s.a.createElement("div",{className:"month heading-four"},r.a.utc(e.props.actionDetails.date).local().format("MMM").toUpperCase())),s.a.createElement("div",{className:"details-text"},s.a.createElement("div",{className:"doctor-name heading-four"},e.props.actionDetails.doctorName),s.a.createElement("div",{className:"doctor-speciality"},e.props.actionDetails.doctorSpeciality),s.a.createElement("div",{className:"day-time"},r.a.utc(e.props.actionDetails.date).local().format("dddd")+", ",r.a.utc(e.props.actionDetails.date).local().format("hh:mm a").toUpperCase())))),s.a.createElement("div",{className:"dialog-action-buttons text-right"},s.a.createElement("div",{className:"cancel-btn text-center",onClick:e.props.closeModal},"No"),s.a.createElement("div",{className:"confirm-btn text-center",onClick:e.deleteAppointment},"Yes")))}}]),t}(s.a.Component);f.contextTypes={store:p.a.object.isRequired},t.a=f},792:function(e,t,n){"use strict";var a=n(94),o=n.n(a),i=function(e){return o.a.utc(e).format("YYYYMMDDTHHmmssZ").replace("+00:00","Z")},l=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15,l="https://www.google.com/calendar/event?action=TEMPLATE&";return l+="text="+e+"&",l+="dates="+i(o.a.utc(n).local()),l+="/"+i(o.a.utc(n).local().add(a,"m"))+"&",l+="&location="+t},s=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:15;return["BEGIN:VCALENDAR","VERSION:2.0","BEGIN:VEVENT","DTSTART:"+i(o.a.utc(n).local()),"DTEND:"+i(o.a.utc(n).local().add(a,"m")),"SUMMARY:"+e,"DESCRIPTION:"+e,"END:VEVENT","END:VCALENDAR"].join("\n")},c=function(e,t,n,a){/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream?window.open(encodeURI("data:text/calendar;charset=utf8,"+s(e,t,n,a)),"_blank"):window.open(l(e,t,n,a),"_blank")};t.a=c},801:function(e,t){},814:function(e,t){}});